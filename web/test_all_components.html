<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIAC Assistant - All Components Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-section h2 {
            color: #555;
            margin-top: 0;
        }
        .component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>SIAC Assistant - All Components Test</h1>
        
        <div class="test-section">
            <h2>TemplateValidationCard Component</h2>
            <div class="component-grid">
                <div>
                    <h3>SUCCESS Scenario</h3>
                    <div id="template-success"></div>
                </div>
                <div>
                    <h3>FAILED Scenario</h3>
                    <div id="template-failed"></div>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>BroadcastConfirmationCard Component</h2>
            <div class="component-grid">
                <div>
                    <h3>SCHEDULED Campaign</h3>
                    <div id="broadcast-scheduled"></div>
                </div>
                <div>
                    <h3>TEST Campaign</h3>
                    <div id="broadcast-test"></div>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>AuthenticationRequiredCard Component</h2>
            <div class="component-grid">
                <div>
                    <h3>Authentication Required</h3>
                    <div id="auth-required"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- React and ReactDOM from CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Our bundled components -->
    <script type="module" src="dist/template-validation-card.js"></script>
    <script type="module" src="dist/broadcast-confirmation-card.js"></script>
    <script type="module" src="dist/authentication-required-card.js"></script>
    
    <script type="module">
        import TemplateValidationCard from './dist/template-validation-card.js';
        import BroadcastConfirmationCard from './dist/broadcast-confirmation-card.js';
        import AuthenticationRequiredCard from './dist/authentication-required-card.js';
        
        const { createElement: h } = React;
        const { createRoot } = ReactDOM;
        
        // Mock ChatGPT Skybridge API for testing
        window.openai = {
            toolOutput: {
                validation_status: 'SUCCESS',
                template_name: 'Welcome Message',
                passed_internal_checks: true,
                category: 'Marketing',
                language_code: 'es_ES'
            },
            toolResponseMetadata: {
                raw_payload_for_preview: {
                    template_name: 'Welcome Message',
                    body_text: 'Welcome to our service! This is a comprehensive welcome message with {{1}} and {{2}}.',
                    category: 'Marketing',
                    language_code: 'es_ES',
                    validation_rules_applied: ['Minimum length check', 'Spam content detection'],
                    validation_timestamp: new Date().toISOString(),
                    estimated_review_time: '24-48 hours'
                },
                template_html_mockup: '<div class="template-preview">...</div>'
            },
            callTool: async (toolName, args) => {
                console.log('Mock callTool:', toolName, args);
                alert(`Mock: Calling tool ${toolName} with args: ${JSON.stringify(args)}`);
            },
            sendFollowUpMessage: async (message) => {
                console.log('Mock sendFollowUpMessage:', message);
                alert(`Mock: Sending follow-up message: ${message}`);
            },
            requestDisplayMode: async (mode) => {
                console.log('Mock requestDisplayMode:', mode);
                alert(`Mock: Requesting ${mode} display mode`);
            }
        };
        
        // Test data for TemplateValidationCard
        const templateSuccessData = {
            toolOutput: {
                validation_status: 'SUCCESS',
                template_name: 'Welcome Offer',
                passed_internal_checks: true,
                category: 'Marketing',
                language_code: 'es_ES'
            },
            toolResponseMetadata: {
                raw_payload_for_preview: {
                    template_name: 'Welcome Offer',
                    body_text: 'Welcome to our premium service! Get 20% off your first month with code {{1}}. Limited time offer!',
                    category: 'Marketing',
                    language_code: 'es_ES',
                    validation_rules_applied: ['Minimum length check', 'Spam content detection'],
                    validation_timestamp: new Date().toISOString(),
                    estimated_review_time: '24-48 hours'
                },
                template_html_mockup: '<div class="template-preview">...</div>'
            }
        };
        
        const templateFailedData = {
            toolOutput: {
                validation_status: 'FAILED',
                template_name: 'Spam Template',
                passed_internal_checks: false,
                category: 'Marketing',
                language_code: 'en_US'
            },
            toolResponseMetadata: {
                raw_payload_for_preview: {
                    template_name: 'Spam Template',
                    body_text: 'Buy now! Limited time spam offer!',
                    category: 'Marketing',
                    language_code: 'en_US',
                    validation_rules_applied: ['Minimum length check', 'Spam content detection'],
                    validation_timestamp: new Date().toISOString(),
                    estimated_review_time: '24-48 hours'
                },
                template_html_mockup: '<div class="template-preview">...</div>',
                raw_validation_errors: {
                    errors: [
                        {
                            field: 'body_text',
                            message: 'Contains spam keywords',
                            severity: 'error',
                            suggestion: 'Remove promotional language and use more professional tone'
                        },
                        {
                            field: 'body_text',
                            message: 'Text too short for marketing category',
                            severity: 'error',
                            suggestion: 'Add more descriptive content about your service'
                        }
                    ],
                    overall_status: 'FAILED'
                }
            }
        };
        
        // Test data for BroadcastConfirmationCard
        const broadcastScheduledData = {
            toolOutput: {
                campaign_id: 'campaign_welcome_offer_123456',
                template_id: 'template_welcome_offer',
                segment_name: 'clientes_recurrentes',
                schedule_time_utc: '2024-01-25T14:30:00Z',
                status: 'SCHEDULED',
                estimated_recipients: 1250,
                scheduled_at: new Date().toISOString()
            }
        };
        
        const broadcastTestData = {
            toolOutput: {
                campaign_id: 'campaign_test_789012',
                template_id: 'template_test_message',
                segment_name: 'test_segment',
                schedule_time_utc: '2024-01-25T15:00:00Z',
                status: 'SCHEDULED_TEST',
                estimated_recipients: 50,
                scheduled_at: new Date().toISOString()
            }
        };
        
        // Test data for AuthenticationRequiredCard
        const authRequiredData = {
            toolOutput: {
                authentication_required: true,
                error_message: 'Authentication required to access SIAC resources',
                auth_url: 'https://auth.siac-app.com/oauth/authorize'
            }
        };
        
        // Render components
        const root1 = createRoot(document.getElementById('template-success'));
        root1.render(h(TemplateValidationCard, { mockData: templateSuccessData }));
        
        const root2 = createRoot(document.getElementById('template-failed'));
        root2.render(h(TemplateValidationCard, { mockData: templateFailedData }));
        
        const root3 = createRoot(document.getElementById('broadcast-scheduled'));
        root3.render(h(BroadcastConfirmationCard, { mockData: broadcastScheduledData }));
        
        const root4 = createRoot(document.getElementById('broadcast-test'));
        root4.render(h(BroadcastConfirmationCard, { mockData: broadcastTestData }));
        
        const root5 = createRoot(document.getElementById('auth-required'));
        root5.render(h(AuthenticationRequiredCard, { mockData: authRequiredData }));
    </script>
</body>
</html>



